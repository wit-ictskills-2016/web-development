 <!DOCTYPE html>
 <html>
   <head>

     <link href='https://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>

     <meta charset="utf-8">
     <meta name="viewport" content="width=device-width, initial-scale=1">

     <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.1.4/semantic.min.css" type="text/css">
     <link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.9.1/styles/solarized_light.min.css" rel="stylesheet" />

     <script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
     <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery.address/1.6/jquery.address.min.js"></script>
     <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.1.4/semantic.min.js"></script>
     <script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.9.1/highlight.min.js"></script>
     <script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.9.1/languages/java.min.js"></script>
     <script>hljs.initHighlightingOnLoad();</script>

      <style>
        

body 
{
  font-family: "Open Sans", "Helvetica", "Helvetica Neue",  "Arial", sans-serif;
}

figcaption
{
  margin-bottom: 20px;
}

.vertical-align
{
  display: flex;
  align-items: center;
}

.credits
{
  min-height:20px;
}


    </style>

  </head>

  <body>

    



  <div class="ui container">
    

<style>
  

code
{
  font-family: "Monaco";
  font-size: 110%;
}

img
{
  padding:1px;
  border:1px solid black;
}

h1
{
  font-style:italic;
  font-size:130%;
  border-bottom: thin solid black;
}
h2
{
  font-size:110%;
  border-bottom: thin solid black;
}
h3
{
  font-size:100%;
  border-bottom: thin solid black;
}



</style>

<div class="ui fixed top pointing inverted menu labmenu">
  <header class="header item">
    <a href="../index.html">
      <i class="sitemap icon"></i>
      CSS Frameworks
    </a>
  </header>
  <div class="right tab-menu menu">
    
      <a class="item" data-tab="Lab-05c">
        Lab-05c
      </a>
    
      <a class="item" data-tab="01">
        01
      </a>
    
      <a class="item" data-tab="02">
        02
      </a>
    
      <a class="item" data-tab="03">
        03
      </a>
    
      <a class="item" data-tab="04">
        04
      </a>
    
      <a class="item" data-tab="05">
        05
      </a>
    
      <a class="item" data-tab="06">
        06
      </a>
    
      <a class="item" data-tab="Exercises">
        Exercises
      </a>
    
    </div>
</div>

<br><br>

  
  <div  class="ui tab segment lab" data-tab="Lab-05c">
    <h1>Objectives</h1>
<p>Install software tools to serve a web site locally and also to deploy the web site to a public web server.</p>

  </div>
 
  <div  class="ui tab segment lab" data-tab="01">
    <h1>Command Prompt</h1>
<p>Open a command prompt on Windows. The easiest way to do this is in Windows 7 to type &#39;cmd&#39; in the Search Box on the Windows start menu:</p>
<p><img src="img/14.png" alt=""></p>
<p>When you type it, the start menu might change to the following:</p>
<p><img src="img/15.png" alt=""></p>
<p>...and if you press return, then the command window itself will appear:</p>
<p><img src="img/16.png" alt=""></p>
<p>On Windows 8 and 10, access the desktop from the home screen, and run File Explorer (may be in the toolbar). Then select File-&gt;Open Command Prompt:</p>
<p><img src="img/01a.png" alt=""></p>

  </div>
 
  <div  class="ui tab segment lab" data-tab="02">
    <h1>Command Line</h1>
<p>This is an alternative interface to Windows which it is important to become familiar with. In this window you can type what are sometimes called &#39;DOS&#39; commands. These commands let you have a finer level of control of your PC, and are particularly important for programmers to master.</p>
<p>Here are some simple commands:</p>
<ul>
<li>dir<ul>
<li>list all files in a directory</li>
</ul>
</li>
<li>cd ..<ul>
<li>change to a parent directory</li>
</ul>
</li>
<li>cd \<directory name><ul>
<li>change to a specific directory</li>
</ul>
</li>
</ul>
<p>It is essential that you become adept at these commands, and a few others.</p>
<p>Bear in mind that these commands always have a &#39;current directory&#39; in mind (a directory is another name for a folder). Try them now and see if you can &#39;navigate&#39; to your web development workspace. For instance, if the folder is located as shown here:</p>
<p><img src="img/17.png" alt=""></p>
<p>Then the commands to get there will look like this:</p>
<p><img src="img/18.png" alt=""></p>
<p>If your workspace is located on another drive, the enter that drive letter first - say &quot;G:&quot;, press return, and then try the cd and dir commands.</p>
<p><img src="img/19.png" alt=""></p>
<p>Note in all of the above that the &#39;prompt&#39; in the command window is always showing the &#39;current&#39; drive/directory.</p>
<p>Also, if you have a &#39;space&#39; in your directory (a bad idea generally), then you will have to use quotation marks in the commands. Here is an example:</p>
<p><img src="img/20.png" alt=""></p>
<p>See in the above transcript that the directory name is &quot;Web Development Workspace&quot; - and it has been enclosed in double quotes.</p>
<p>In general, however, it is best to adopt the following conventions.</p>
<ul>
<li><p>Never use spaces in directory or file names</p>
</li>
<li><p>Never use upper case in directory or file names</p>
</li>
<li><p>If you wish to use readable multiple words for a directory or file name, separate the words with &#39;-&#39;. e.g.</p>
<ul>
<li>web-development</li>
<li>java-projects</li>
</ul>
</li>
</ul>
<p>Perhaps you might take this opportunity to adjust your workspace and projects to adopt the above conventions. If you do, then you will find that using DOS commands to navigate your folders will be considerably easier.</p>
<p>Before going on to the next step, make sure you are comfortable navigating in DOS around the file system, and in particular make sure you can navigate to your web development workspace.</p>

  </div>
 
  <div  class="ui tab segment lab" data-tab="03">
    <h1>Serving the site with Harp.js</h1>
<p>To date you have been opening the web pages you have designed by locating them on your PC and opening the browser directly. This is adequate for simple pages, but does not accurately reproduce how the page/site will be browsed when it is deployed on the public Internet.</p>
<p>To reproduce this experience, we will need to install a <code>web server</code> on our workstations, start this server and have it make our site available in a simulated network. Some server tools can also help simplify the work flow of deploying our site to a public server so that it is accessible globally. We will attempt both in this lab.</p>
<p>Download this archive here </p>
<ul>
<li><a href="https://dl.dropboxusercontent.com/u/2068306/node.zip">node.zip</a></li>
</ul>
<p>Unzip the archive to the root of C: drive. This may take a few minutes. The archive is not large, but contains many small files...</p>
<p>Make double sure the folder is in the root of C: drive - open a Command Prompt (see last step) and set G: to be your default drive, and list all directories:</p>
<pre><code>C:\Users\yourid&gt; cd \
C:\&gt; dir
...
Directory of C:\
...
...
11/02/2015   10:00 AM &lt;DIR&gt;    node  
...
C:\&gt;</code></pre>
<p>Then type the following command:</p>
<pre><code>C:\&gt; \node\init</code></pre>
<p>It may respond with a scree full of information, which you can ignore.</p>
<p>Now type the following (first line only):</p>
<pre><code>C:\&gt; harp init demo
Downloading boilerplate: https://github.com/harp-boilerplates/default
Initialized project at c:\demo</code></pre>
<p>Then enter (first line only again):</p>
<pre><code>C:\&gt; cd demo
C:\demo&gt; harp server
------------
Harp v0.19.0 – Chloi Inc. 2012–2015
Your server is listening at http://localhost:9000/
Press Ctl+C to stop the server
------------</code></pre>
<p>Now browse to this url here:</p>
<ul>
<li><a href="http://localhost:9000">http://localhost:9000</a></li>
</ul>
<p>and you should see this page:</p>
<p><img src="img/21.png" alt=""></p>
<p>To stop &#39;serving&#39; the page, enter Ctrl-C in the command prompt:</p>
<pre><code>
Harp v0.19.0 – Chloi Inc. 2012–2015
C:\demo&gt; harp serverYour server is listening at http://localhost:9000/
Press Ctl+C to stop the server
------------
^C
Terminate batch job (Y/N)? y
G:\&gt;</code></pre>

  </div>
 
  <div  class="ui tab segment lab" data-tab="04">
    <h1>Deploying a Web Site using Surge</h1>
<p>Create a new project com the command line by entering the following:</p>
<pre><code>harp init iot-web</code></pre>
<p>Remember, make sure to keep an eye on which folder this command is executed from. Opening the folder should reveal these files:</p>
<p><img src="img/22.png" alt=""></p>
<p>We will use files like these later - but for the moment delete all of these files and replace them with the following file called <code>harp.json</code>:</p>
<h2>harp.json</h2>
<pre><code>{
  &quot;globals&quot;: 
  {

  }
}</code></pre>
<p>If you havent already downloaded it - get the last version of the IoT web site from the last lab:</p>
<ul>
<li>Download Archive: <a href="https://github.com/wit-computing/iot-web/releases/tag/Lab05b">https://github.com/wit-computing/iot-web/releases/tag/Lab05b</a></li>
</ul>
<p>Unzip the project, and copy the <code>public</code> folder into the iot-web folder you have just created. Your <code>iot-web</code> folder should look like this:</p>
<p><img src="img/23.png" alt=""></p>
<p>Now we will <code>serve</code> the web site locally with this command:</p>
<pre><code>C:&gt; cd iot-web
C:\iot-web&gt; harp server
Your server is listening at http://localhost:9000/
Press Ctl+C to stop the server</code></pre>
<p>Notice that the command is executed form within the <code>iot-web</code> directory.</p>
<p>Verify that the site is available here:</p>
<ul>
<li><a href="http://localhost:9000/">http://localhost:9000/</a></li>
</ul>
<p>Terminate the server again with ^C:</p>
<pre><code>Your server is listening at http://localhost:9000/
Press Ctl+C to stop the server
Terminate batch job (Y/N)? y
^C
C:\iot-web&gt;</code></pre>
<p>From still within the <code>iot-folder</code>, enter the following command:</p>
<pre><code>C:\iot-web&gt; surge
    Welcome to Surge!
    Please login or create an account by entering your email and password:</code></pre>
<p>Enter credential to create a new account now - be sure to remember the password. Surge will then deploy the site to a public server:</p>
<pre><code>  project path: C:\dev\iot-web\
               size: 34 files, 2.3 MB
             domain: dull-pet.surge.sh
             upload: [====================] 100%, eta: 0.0s
   propagate on CDN: [====================] 100%
               plan: Free
              users: youremail@domain.com
         IP address: 192.241.214.148

    Success! Project is published and running at dull-pet.surge.sh</code></pre>
<p>The <code>domain</code> can be customised -in the above example &#39;dull-pet&#39; was generated, you can replace this with something more suitable (but unique, so perhaps include your initials, the current date or something that may not be used by someone else).</p>
<p>Open a browser to inspect the running site. This is now deployed and accessible globally!</p>

  </div>
 
  <div  class="ui tab segment lab" data-tab="05">
    <h1>Removing Web Sites from Surge</h1>
<p>If you have published a number of sites you may want to recall what domains were generated, or perhaps remove some or all of the published pages.</p>
<p>The various commands are listed here:</p>
<ul>
<li><a href="https://surge.sh/help&gt;">https://surge.sh/help&gt;</a></li>
</ul>
<p>To list all web sites:</p>
<pre><code>C:\dev\iot-web&gt;surge list
              email: youremail@domain.com
              token: *****************

      iot-1.surge.sh
      dull-pet.surge.sh
      highfalutin-exchange.surge.sh


C:\dev\iot-web&gt;</code></pre>
<p>To remove (delete) a site from the server use the <code>teardown</code> command:</p>
<pre><code>C:\dev\iot-web&gt;surge teardown highfalutin-exchange.surge.sh
              email: youremail@domain.com
              token: *****************
             domain: highfalutin-exchange.surge.sh

    Success - highfalutin-exchange.surge.sh has been removed.


C:\dev\iot-web&gt;</code></pre>

  </div>
 
  <div  class="ui tab segment lab" data-tab="06">
    <h1>Using Templates in Harp.js</h1>
<p>Create a new project on the root of the C drive called <code>iot-web-ejs</code>:</p>
<pre><code>C:\&gt; harp init iot-web-ejs
Downloading boilerplate: https://github.com/harp-boilerplates/default
Initialized project at c:\iot-web-ejs</code></pre>
<p>Here is another version of the IOT web site:</p>
<ul>
<li><a href="archives/iot-web-ejs.zip">iot-web-ejs.zjp</a></li>
</ul>
<p>Download this somewhere, and copy the files in the archive into the <code>iot-web-ejs</code> project you have just created above. The folder should be structured something like this:</p>
<pre><code>iot-web-ejs
├── harp.json
└── public
    ├── assets
    │   └── images
    │      ...
    ├── includes
    │   ├── _curriculum.ejs
    │   ├── _footer.ejs
    │   ├── _header.ejs
    │   ├── _sponsors.ejs
    │   └── _summary.ejs
    ├── index.ejs
    ├── strands
    │   ├── _layout.ejs
    │   ├── data.ejs
    │   ├── devices.ejs
    │   ├── maths.ejs
    │   ├── networks.ejs
    │   ├── programming.ejs
    │   └── project.ejs
    └── style.css</code></pre>
<p>This is quite different from the site we examined in Step 04. This version is based on EJS templates</p>
<ul>
<li><a href="http://www.embeddedjs.com">http://www.embeddedjs.com</a></li>
</ul>
<p>.. and we have been using the Harp.hs templating engine to get it running:</p>
<ul>
<li><a href="http://harpjs.com/">http://harpjs.com/</a></li>
</ul>
<p>Server the web site now:</p>
<pre><code>C:\&gt; cd iot-web-ejs
C:\iot-web-ejs&gt; harp server
------------
Harp v0.19.0 – Chloi Inc. 2012–2015
Your server is listening at http://localhost:9000/
Press Ctl+C to stop the server
------------</code></pre>
<p>Also, deploy the web site:</p>
<pre><code>C:\iot-web-ejs&gt; surge
    Welcome to Surge!
    Please login or create an account by entering your email and password:
  project path: C:\dev\iot-web\
               size: 34 files, 2.3 MB
             domain: dull-pet.surge.sh
             upload: [====================] 100%, eta: 0.0s
   propagate on CDN: [====================] 100%
               plan: Free
              users: youremail@domain.com
         IP address: 192.241.214.148

    Success! Project is published and running at dull-pet.surge.sh</code></pre>

  </div>
 
  <div  class="ui tab segment lab" data-tab="Exercises">
    <h1>Exercises</h1>
<h2>Exercise 1</h2>
<p>See if you can deploy your assignment 1 project using surge. Here are the steps:</p>
<ul>
<li>Make sure you have the node+harp+surge packages installed on your computer.</li>
<li>Create a new (empty) folder to contain your project. Into this folder place a file called `harp.json&#39;, containing the following contents:</li>
</ul>
<pre><code>{
  &quot;globals&quot;: 
  {

  }
}</code></pre>
<ul>
<li>Place your entire project into a folder called <code>public</code> inside this project folder (as we did in step 06).</li>
<li>From the command line, enter the command:</li>
</ul>
<pre><code>harp server</code></pre>
<ul>
<li><p>Verify that your side it available on:</p>
<ul>
<li><a href="http://localhost:9000/">http://localhost:9000/</a></li>
</ul>
</li>
</ul>
<ul>
<li>Terminate the server with ^C, and then enter:</li>
</ul>
<pre><code>surge</code></pre>
<ul>
<li>This will deploy the web site:</li>
</ul>
<pre><code>  project path: G:\dev\iot-web\
               size: 34 files, 2.3 MB
             domain: XXX.surge.sh
             upload: [====================] 100%, eta: 0.0s
   propagate on CDN: [====================] 100%
               plan: Free
              users: youremail@domain.com
         IP address: 192.241.214.148

    Success! Project is published and running at XXX.surge.sh</code></pre>
<ul>
<li>Verify that the site is available on the domain. You will have the opportunity to change the domain <code>XXX</code></li>
<li>Exchange project URLs with your friends!</li>
<li>You may have had relative paths in your html files:</li>
</ul>
<pre><code>  &lt;a href=&quot;../stuff/mupage.html&quot;&gt; my stuff &lt;/a&gt;</code></pre>
<h2>Exercise 2:</h2>
<p>Study the <code>iot-web-ejs</code> site carefully:</p>
<pre><code>
</code></pre>
<ul>
<li>or even more confusing:</li>
</ul>
<pre><code>  &lt;a href=&quot;../../stuff/mupage.html&quot;&gt; my stuff &lt;/a&gt;</code></pre>
<p>These type of references can all be replaced with:</p>
<pre><code>  &lt;a href=&quot;/stuff/mypage.html&quot;&gt; my stuff &lt;/a&gt;</code></pre>
<pre><code>  &lt;a href=&quot;/stuff/mypage.html&quot;&gt; my stuff &lt;/a&gt;</code></pre>
<ul>
<li>Try this now - one link at a time to make sure it works.</li>
</ul>
<h2>Exercise 2</h2>
<p>Examine the project you created in step 6 again:</p>
<pre><code>iot-web-ejs
├── harp.json
└── public
    ├── assets
    │   └── images
    │      ...
    ├── includes
    │   ├── _curriculum.ejs
    │   ├── _footer.ejs
    │   ├── _header.ejs
    │   ├── _sponsors.ejs
    │   └── _summary.ejs
    ├── index.ejs
    ├── strands
    │   ├── _layout.ejs
    │   ├── data.ejs
    │   ├── devices.ejs
    │   ├── maths.ejs
    │   ├── networks.ejs
    │   ├── programming.ejs
    │   └── project.ejs
    └── style.css</code></pre>
<p>This is the same site we deployed earlier - but divided into templates using EJS:</p>
<ul>
<li><a href="http://www.embeddedjs.com">http://www.embeddedjs.com</a></li>
</ul>
<p>This systems is documented better here:</p>
<ul>
<li><a href="http://harpjs.com/docs/development/ejs">http://harpjs.com/docs/development/ejs</a></li>
</ul>
<p>See if you can adapt your assignment 1 project to use EJS templates. This may reduce the amount of HTML you have in the project, and also allow you to have set of smaller files to maintain - but perhaps more of them.</p>

  </div>
 


<script>
$('.ui.menu .item')
  .tab({
    history: true,
    historyType: 'hash'
  })
;
</script>

   </div>

   
  <br><br>
  <div class="ui bottom fixed borderless menu">
    <div class="ui small item">
    <p id="footertext">
    Prepared by  Eamonn de Leastar (edeleastar@wit.ie). Except where otherwise noted, this content is licensed under a
     <a  href="http://creativecommons.org/licenses/by-nc/4.0/" title="External link to http://creativecommons.org/licenses/by-nc/4.0/"
       target="_blank">Creative Commons Attribution-NonCommercial 4.0 License
     </a>
     </p>
    </div>
  </div>

    <script>
      
$(document).ready(function()
{
  $("img").addClass ("ui image");
  $('.ui.embed').embed();

  var images = $(".lab img");
  jQuery.each(images, function(i)  {
    if((images[i].alt).length > 0)
    {
      var div_img = $(document.createElement("div")).addClass("ui segment");
      $(images[i]).wrap(div_img);
      var div_label = $(document.createElement("div")).addClass("ui ribbon teal top attached label");
      div_label.append(images[i].alt);
      $(div_label).insertBefore(images[i]);
    }
  });


})


    </script>

  </body>
 </html>